FROM 172.16.1.73/builder/golang:1.9-alpine3.6 AS build-env
MAINTAINER TOS <tos@transwarp.io>

ADD . /go/src/k8s.io/helm/
RUN cd /go/src/k8s.io/helm && make build

FROM 172.16.1.73/transwarp/alpine:transwarp-base
MAINTAINER TOS <tos@transwarp.io>

COPY --from=build-env /go/src/k8s.io/helm/bin/helm /usr/bin/
COPY --from=build-env /go/src/k8s.io/helm/bin/tiller /usr/bin/
COPY --from=build-env /go/src/k8s.io/helm/bin/rudder /usr/bin/
RUN chmod +x /usr/bin/helm /usr/bin/tiller /usr/bin/rudder
